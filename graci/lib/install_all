#!/bin/bash

#
# Conditional compilation flags
#
args=""
for var in "$@"; do
    args+=" $var"
done

args+=" -DHDF5_INC_DIR=/home/simon/software/hdf5-1.12.0/hdf5/include"
args+=" -DHDF5_LIB_DIR=/home/simon/software/hdf5-1.12.0/hdf5/lib"

#args+=" -DHDF5_INC_DIR=/home/simon/software/hdf5-1.12.1/hdf5/include"
#args+=" -DHDF5_LIB_DIR=/home/simon/software/hdf5-1.12.1/hdf5/lib"

#args+=" -DHDF5_INC_DIR=/gpfs/share/opt/hdf5-1.12.1/hdf5/include"
#args+=" -DHDF5_LIB_DIR=/gpfs/share/opt/hdf5-1.12.1/hdf5/lib"

#args+=" -DHDF5_INC_DIR=~/software/hdf5/include"
#args+=" -DHDF5_LIB_DIR=~/software/hdf5/lib"

#
# Build all the libraries
#
topdir=`pwd`
for lib in overlap bitci; do

    cd $lib

    if [ -d build ]; then
	rm -r build/*
    else
	mkdir build
    fi

    cd build
    cmake ../ -DCMAKE_INSTALL_PREFIX=../../ $args
    make
    make install
    
    cd $topdir
    
done

